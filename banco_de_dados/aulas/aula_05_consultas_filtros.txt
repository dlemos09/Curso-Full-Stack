================================================================================
                              AULA 05 - DIA 5
                    CONSULTAS BÃSICAS E FILTROS AVANÃ‡ADOS
================================================================================

HORÃRIO: 13:30 - 17:30 (4 horas)
DATA: _____/_____/_____

================================================================================
                            OBJETIVOS DA AULA
================================================================================

Ao final desta aula, vocÃª serÃ¡ capaz de:
âœ“ Dominar filtros com WHERE usando operadores complexos
âœ“ Usar LIKE, ILIKE para busca de padrÃµes
âœ“ Aplicar IN, BETWEEN, IS NULL eficientemente
âœ“ Ordenar e paginar resultados (ORDER BY, LIMIT, OFFSET)
âœ“ Entender DISTINCT e trabalhar com duplicatas

================================================================================
                          CRONOGRAMA DA AULA
================================================================================

13:30 - 13:45 (15 min) â†’ RevisÃ£o Geral Semana 1
13:45 - 14:45 (60 min) â†’ Operadores e Filtros WHERE
14:45 - 15:30 (45 min) â†’ LIKE, IN, BETWEEN
15:30 - 15:45 (15 min) â†’ â˜• INTERVALO
15:45 - 17:00 (75 min) â†’ ORDER BY, LIMIT, DISTINCT
17:00 - 17:30 (30 min) â†’ RevisÃ£o Semana 1 + ExercÃ­cios

================================================================================
     PARTE 1: OPERADORES EM WHERE (13:45 - 14:45)
================================================================================

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 1.1 OPERADORES DE COMPARAÃ‡ÃƒO                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Operadores bÃ¡sicos:
=   -- Igual
<>  -- Diferente (tambÃ©m pode usar !=)
>   -- Maior que
<   -- Menor que
>=  -- Maior ou igual
<=  -- Menor ou igual

-- Exemplos prÃ¡ticos:
SELECT * FROM produtos WHERE preco > 100;
SELECT * FROM funcionarios WHERE salario >= 3000;
SELECT * FROM clientes WHERE ativo = TRUE;
SELECT * FROM pedidos WHERE status <> 'CANCELADO';

/*
   ğŸ’¡ CURIOSIDADE - COMPARAÃ‡ÃƒO COM NULL:
   NULL nÃ£o Ã© igual a nada, nem a NULL!
   
   âŒ WHERE idade = NULL     -- ERRADO! NÃ£o funciona
   âœ… WHERE idade IS NULL    -- CORRETO!
   âœ… WHERE idade IS NOT NULL
*/


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 1.2 OPERADORES LÃ“GICOS (AND, OR, NOT)                                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- AND: TODAS as condiÃ§Ãµes devem ser verdadeiras
SELECT * FROM produtos 
WHERE preco > 100 AND estoque > 0 AND ativo = TRUE;

-- OR: PELO MENOS UMA condiÃ§Ã£o deve ser verdadeira
SELECT * FROM clientes 
WHERE cidade = 'SÃ£o Paulo' OR cidade = 'Rio de Janeiro';

-- NOT: Nega a condiÃ§Ã£o
SELECT * FROM funcionarios 
WHERE NOT departamento_id = 1;
-- Mesmoesultado:
SELECT * FROM funcionarios WHERE departamento_id <> 1;

-- Combinando com parÃªnteses (precedÃªncia):
SELECT * FROM produtos 
WHERE (categoria = 'EletrÃ´nicos' OR categoria = 'InformÃ¡tica')
  AND preco < 1000
  AND estoque > 0;

/*
   âš ï¸ ORDEM DE PRECEDÃŠNCIA (sem parÃªnteses):
   1Âº) NOT
   2Âº) AND
   3Âº) OR
   
   Exemplo:
   WHERE a OR b AND c
   Ã‰ interpretado como: a OR (b AND c)
   
   ğŸ’¡ DICA: Use parÃªnteses para clareza!
*/


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 1.3 OPERADORES ARITMÃ‰TICOS EM WHERE                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—

+   -- AdiÃ§Ã£o
-   -- SubtraÃ§Ã£o
*   -- MultiplicaÃ§Ã£o
/   -- DivisÃ£o
%   -- MÃ³dulo (resto da divisÃ£o)
^   -- PotÃªncia

-- Exemplos prÃ¡ticos:
SELECT nome, preco, preco * 0.10 AS desconto
FROM produtos 
WHERE preco * 0.90 < 500;  -- Produtos que com 10% off ficam abaixo de 500

SELECT * FROM pedidos 
WHERE valor_total % 10 = 0;  -- Valores mÃºltiplos de 10

SELECT * FROM funcionarios 
WHERE salario / 12 > 5000;  -- SalÃ¡rio mensal acima de 5000

/*
   ğŸ’¡ SOBRE O SÃMBOLO % (PORCENTAGEM):
   
   Em PostgreSQL, % tem DOIS usos:
   
   1) OPERADOR ARITMÃ‰TICO (MÃ³dulo/Resto):
      10 % 3 = 1  (resto da divisÃ£o de 10 por 3)
      
   2) CURINGA NO LIKE (veremos a seguir):
      WHERE nome LIKE '%Silva%'
      
   O contexto define qual uso!
*/


================================================================================
     PARTE 2: LIKE E PADRÃ•ES (14:45 - 15:30)
================================================================================

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 2.1 LIKE - BUSCA POR PADRÃƒO                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Curingas:
%   -- Qualquer sequÃªncia de caracteres (0 ou mais)
_   -- Exatamente UM caractere

-- ComeÃ§a com 'JoÃ£o':
SELECT * FROM clientes WHERE nome LIKE 'JoÃ£o%';
-- Resultado: JoÃ£o Silva, JoÃ£o Pedro, JoÃ£o...

-- Termina com 'Silva':
SELECT * FROM clientes WHERE nome LIKE '%Silva';
-- Resultado: JoÃ£o Silva, Maria Silva, Pedro Silva...

-- ContÃ©m 'Silva' em qualquer posiÃ§Ã£o:
SELECT * FROM clientes WHERE nome LIKE '%Silva%';
-- Resultado: JoÃ£o Silva, Silva Costa, Maria da Silva...

-- Exatamente 5 caracteres:
SELECT * FROM codigos WHERE codigo LIKE '_____';  -- 5 underscores

-- ComeÃ§a com A ou B, 3 caracteres no total:
SELECT * FROM produtos WHERE nome LIKE 'A__' OR nome LIKE 'B__';

-- CPF parcial (formato: ___.___.___-__):
SELECT * FROM clientes WHERE cpf LIKE '123.%';

/*
   ğŸ’¡ LIKE Ã© CASE SENSITIVE (diferencia maiÃºscula/minÃºscula)
   'JoÃ£o' â‰  'joÃ£o'
*/


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 2.2 ILIKE - LIKE SEM CASE SENSITIVE (PostgreSQL)                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- ILIKE ignora maiÃºsculas/minÃºsculas:
SELECT * FROM clientes WHERE nome ILIKE '%silva%';
-- Encontra: Silva, SILVA, silva, SiLvA

-- Buscar email sem se preocupar com case:
SELECT * FROM usuarios WHERE email ILIKE '%@GMAIL.COM';
-- Encontra: user@gmail.com, USER@GMAIL.COM, etc.

/*
   ğŸ’¡ DIFERENÃ‡A:
   LIKE  â†’ 'JoÃ£o' encontra 'JoÃ£o', nÃ£o encontra 'joÃ£o'
   ILIKE â†’ 'JoÃ£o' encontra 'JoÃ£o', 'JOÃƒO', 'joÃ£o', 'JoÃƒo'
*/


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 2.3 NOT LIKE / NOT ILIKE                                                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—

-- Nomes que NÃƒO comeÃ§am com 'A':
SELECT * FROM clientes WHERE nome NOT LIKE 'A%';

-- Emails que NÃƒO sÃ£o Gmail:
SELECT * FROM usuarios WHERE email NOT ILIKE '%@gmail.com';


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 2.4 SIMILAR TO - EXPRESSÃ•ES REGULARES SIMPLIFICADAS                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- SIMILAR TO usa sintaxe parecida com regex:
SELECT * FROM produtos WHERE codigo SIMILAR TO '[A-Z]{3}-[0-9]{4}';
-- Encontra: ABC-1234, XYZ-9999

-- Telefone: (11) 98765-4321
SELECT * FROM contatos 
WHERE telefone SIMILAR TO '\([0-9]{2}\) [0-9]{5}-[0-9]{4}';


================================================================================
     PARTE 3: IN, BETWEEN, NULL (15:30 - 15:45 antes do intervalo)
================================================================================

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 3.1 IN - LISTA DE VALORES                                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Buscar mÃºltiplos valores especÃ­ficos:
SELECT * FROM produtos 
WHERE categoria IN ('EletrÃ´nicos', 'InformÃ¡tica', 'Games');

-- Ã‰ equivalente a:
SELECT * FROM produtos 
WHERE categoria = 'EletrÃ´nicos' 
   OR categoria = 'InformÃ¡tica' 
   OR categoria = 'Games';

-- NOT IN (excluir valores):
SELECT * FROM pedidos 
WHERE status NOT IN ('CANCELADO', 'DEVOLVIDO');

-- IN com subconsulta (veremos melhor em aulas futuras):
SELECT * FROM produtos 
WHERE categoria_id IN (SELECT id FROM categorias WHERE ativo = TRUE);

/*
   ğŸ’¡ IN Ã© mais legÃ­vel e performÃ¡tico que mÃºltiplos OR!
*/


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 3.2 BETWEEN - INTERVALO DE VALORES                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Produtos entre R$ 100 e R$ 500:
SELECT * FROM produtos 
WHERE preco BETWEEN 100 AND 500;

-- Ã‰ equivalente a:
SELECT * FROM produtos 
WHERE preco >= 100 AND preco <= 500;

-- NOT BETWEEN:
SELECT * FROM produtos 
WHERE preco NOT BETWEEN 100 AND 500;
-- (preco < 100 OU preco > 500)

-- BETWEEN com datas:
SELECT * FROM pedidos 
WHERE data_pedido BETWEEN '2024-01-01' AND '2024-12-31';

-- Idades entre 18 e 25:
SELECT * FROM pessoas 
WHERE idade BETWEEN 18 AND 25;

/*
   ğŸ’¡ BETWEEN Ã© INCLUSIVO (inclui os extremos)
   BETWEEN 10 AND 20 inclui 10 e 20
*/


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 3.3 IS NULL / IS NOT NULL                                                 â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Clientes sem email cadastrado:
SELECT * FROM clientes WHERE email IS NULL;

-- Produtos com descriÃ§Ã£o preenchida:
SELECT * FROM produtos WHERE descricao IS NOT NULL;

-- âš ï¸ NUNCA USE = NULL ou <> NULL!
-- âŒ WHERE email = NULL     -- ERRADO! Sempre retorna 0 linhas
-- âœ… WHERE email IS NULL    -- CORRETO!

-- Contar NULLs:
SELECT COUNT(*) FROM clientes WHERE telefone IS NULL;

-- COALESCE: substituir NULL por valor padrÃ£o
SELECT nome, COALESCE(email, 'Sem email') AS email
FROM clientes;

/*
   ğŸ’¡ NULL significa "ausÃªncia de valor"
   - NULL â‰  0 (zero)
   - NULL â‰  '' (string vazia)
   - NULL â‰  FALSE
   - NULL Ã© simplesmente "desconhecido"
*/


================================================================================
     PARTE 4: ORDENAÃ‡ÃƒO E PAGINAÃ‡ÃƒO (15:45 - 17:00)
================================================================================

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 4.1 ORDER BY - ORDENAR RESULTADOS                                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Ordenar crescente (ASC - padrÃ£o):
SELECT * FROM produtos ORDER BY preco;
SELECT * FROM produtos ORDER BY preco ASC;  -- Mesma coisa

-- Ordenar decrescente (DESC):
SELECT * FROM produtos ORDER BY preco DESC;

-- Ordenar por mÃºltiplas colunas:
SELECT * FROM funcionarios 
ORDER BY departamento_id, salario DESC;
-- 1Âº ordena por departamento (crescente)
-- 2Âº dentro de cada departamento, ordena por salÃ¡rio (decrescente)

-- Ordenar por expressÃ£o:
SELECT nome, preco, preco * 0.90 AS preco_desconto
FROM produtos 
ORDER BY preco * 0.90;

-- Ordenar por posiÃ§Ã£o da coluna no SELECT (nÃ£o recomendado):
SELECT nome, preco FROM produtos ORDER BY 2;  -- Ordena pela 2Âª coluna (preco)

/*
   ğŸ’¡ ASC vs DESC:
   ASC  = Ascending  = Crescente = Aâ†’Z, 1â†’9, Janâ†’Dez
   DESC = Descending = Decrescente = Zâ†’A, 9â†’1, Dezâ†’Jan
*/


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 4.2 NULLS FIRST / NULLS LAST                                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Por padrÃ£o, PostgreSQL coloca NULLs no final em ASC:
SELECT * FROM clientes ORDER BY email;
-- emails â†’ NULLs por Ãºltimo

-- ForÃ§ar NULLs primeiro:
SELECT * FROM clientes ORDER BY email NULLS FIRST;

-- Em DESC, NULLs vÃªm primeiro por padrÃ£o:
SELECT * FROM produtos ORDER BY desconto DESC;
-- NULLs primeiro â†’ valores decrescentes

-- ForÃ§ar NULLs por Ãºltimo em DESC:
SELECT * FROM produtos ORDER BY desconto DESC NULLS LAST;


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 4.3 LIMIT - LIMITAR QUANTIDADE DE RESULTADOS                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Buscar apenas os 10 primeiros:
SELECT * FROM produtos LIMIT 10;

-- Top 5 produtos mais caros:
SELECT * FROM produtos ORDER BY preco DESC LIMIT 5;

-- Top 10 clientes que mais compraram:
SELECT cliente_id, SUM(valor_total) AS total_gasto
FROM pedidos 
GROUP BY cliente_id 
ORDER BY total_gasto DESC 
LIMIT 10;

/*
   ğŸ’¡ LIMIT Ã© executado APÃ“S ORDER BY
   EntÃ£o primeiro ordena, depois pega os N primeiros
*/


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 4.4 OFFSET - PULAR LINHAS (PAGINAÃ‡ÃƒO)                                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Pular as primeiras 10 linhas:
SELECT * FROM produtos OFFSET 10;

-- PaginaÃ§Ã£o: pÃ¡gina 1 (10 primeiros):
SELECT * FROM produtos ORDER BY id LIMIT 10 OFFSET 0;

-- PÃ¡gina 2 (do 11Âº ao 20Âº):
SELECT * FROM produtos ORDER BY id LIMIT 10 OFFSET 10;

-- PÃ¡gina 3 (do 21Âº ao 30Âº):
SELECT * FROM produtos ORDER BY id LIMIT 10 OFFSET 20;

-- FÃ³rmula geral para paginaÃ§Ã£o:
-- LIMIT tamanho_pagina OFFSET (numero_pagina - 1) * tamanho_pagina

/*
   Exemplo: 50 itens por pÃ¡gina, mostrar pÃ¡gina 3:
   LIMIT 50 OFFSET 100  (pula 100, mostra 50)
*/

-- Forma alternativa (sintaxe SQL padrÃ£o):
SELECT * FROM produtos ORDER BY id OFFSET 10 ROWS FETCH NEXT 10 ROWS ONLY;


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 4.5 DISTINCT - ELIMINAR DUPLICATAS                                        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Listar cidades sem repetiÃ§Ã£o:
SELECT DISTINCT cidade FROM clientes;

-- Se hÃ¡ clientes em SP, RJ, SP, BH, RJ
-- Resultado: SP, RJ, BH (sem duplicatas)

-- DISTINCT em mÃºltiplas colunas (combinaÃ§Ã£o Ãºnica):
SELECT DISTINCT cidade, estado FROM clientes;

-- Contar valores distintos:
SELECT COUNT(DISTINCT categoria_id) FROM produtos;
-- Quantas categorias diferentes existem nos produtos?

-- DISTINCT com ORDER BY:
SELECT DISTINCT categoria 
FROM produtos 
ORDER BY categoria;

/*
   ğŸ’¡ DISTINCT vs GROUP BY:
   
   DISTINCT â†’ apenas elimina duplicatas
   GROUP BY â†’ agrupa e permite funÃ§Ãµes agregadas (COUNT, SUM)
   
   -- Mesma coisa:
   SELECT DISTINCT cidade FROM clientes;
   SELECT cidade FROM clientes GROUP BY cidade;
   
   -- GROUP BY permite mais:
   SELECT cidade, COUNT(*) 
   FROM clientes 
   GROUP BY cidade;
*/


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ 4.6 COMBINANDO TUDO                                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

-- Query complexa combinando tudo:
SELECT DISTINCT 
    categoria,
    COUNT(*) AS total_produtos,
    AVG(preco) AS preco_medio
FROM produtos 
WHERE ativo = TRUE
  AND preco BETWEEN 50 AND 500
  AND nome ILIKE '%notebook%'
  AND estoque IS NOT NULL
GROUP BY categoria
HAVING COUNT(*) > 5
ORDER BY preco_medio DESC
LIMIT 10
OFFSET 0;

/*
   ğŸ“š ORDEM DE EXECUÃ‡ÃƒO (lÃ³gica interna):
   
   1. FROM      â†’ De onde vem os dados
   2. WHERE     â†’ Filtrar linhas
   3. GROUP BY  â†’ Agrupar
   4. HAVING    â†’ Filtrar grupos
   5. SELECT    â†’ Escolher colunas
   6. DISTINCT  â†’ Eliminar duplicatas
   7. ORDER BY  â†’ Ordenar
   8. LIMIT     â†’ Limitar quantidade
   9. OFFSET    â†’ Pular linhas
*/


================================================================================
                    EXERCÃCIOS PRÃTICOS (17:00 - 17:30)
================================================================================

ğŸ’ª EXERCÃCIO 1: FILTROS VARIADOS (10 min)

Dada a tabela "funcionarios":

a) Listar funcionÃ¡rios com salÃ¡rio entre 3000 e 7000
b) Buscar funcionÃ¡rios cujo nome contÃ©m 'Silva' ou 'Santos'
c) Encontrar funcionÃ¡rios do departamento 1, 2 ou 3
d) Listar funcionÃ¡rios SEM email cadastrado
e) Buscar funcionÃ¡rios admitidos em 2023 ou 2024

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ’ª EXERCÃCIO 2: LIKE E PADRÃ•ES (10 min)

a) Buscar produtos cujo nome comeÃ§a com 'Not' (Notebook, NotÃ­cias...)
b) Encontrar emails do domÃ­nio '@gmail.com' (ignore maiÃºsculas)
c) Listar CPFs que comeÃ§am com '123'
d) Buscar cÃ³digos de produto no formato: ABC-####

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ’ª EXERCÃCIO 3: ORDENAÃ‡ÃƒO E TOP N (10 min)

a) Top 5 produtos mais caros
b) Top 10 clientes por ordem alfabÃ©tica
c) 5 funcionÃ¡rios com menor salÃ¡rio (exclua NULLs)
d) Produtos ordenados por estoque (menores primeiro), depois por preÃ§o

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ’ª EXERCÃCIO 4: PAGINAÃ‡ÃƒO (10 min)

Implemente paginaÃ§Ã£o na tabela "produtos":
- 20 produtos por pÃ¡gina
- Crie queries para: pÃ¡gina 1, 2, 3, 4, 5
- Ordene por nome

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ğŸ’ª DESAFIO EXTRA:

RelatÃ³rio de produtos:
- Apenas ativos
- PreÃ§o entre 100 e 1000
- Nome NÃƒO contÃ©m 'usado'
- Estoque > 0
- Ordenar por: categoria, depois preÃ§o (decrescente)
- Mostrar apenas: categoria, nome, preÃ§o, estoque
- Limitar a 50 resultados
- Pular os primeiros 10


================================================================================
                      REVISÃƒO GERAL - SEMANA 1
================================================================================

ğŸ“ CONTEÃšDO DA SEMANA 1 (Dias 1-5):

DIA 1: IntroduÃ§Ã£o e Conceitos
   âœ“ SGBD, modelo relacional, ACID
   âœ“ InstalaÃ§Ã£o PostgreSQL + DBeaver
   âœ“ CREATE DATABASE, CREATE TABLE
   âœ“ INSERT, SELECT, UPDATE, DELETE bÃ¡sicos

DIA 2: Tipos de Dados e Constraints
   âœ“ INTEGER, SERIAL, DECIMAL, VARCHAR, TEXT, DATE, BOOLEAN
   âœ“ NOT NULL, DEFAULT, UNIQUE, CHECK

DIA 3: Relacionamentos
   âœ“ PRIMARY KEY, FOREIGN KEY
   âœ“ Relacionamentos 1:N, N:N
   âœ“ ON DELETE, ON UPDATE (CASCADE, SET NULL, RESTRICT)
   âœ“ ALTER TABLE, DROP, TRUNCATE

DIA 4: DML e TransaÃ§Ãµes
   âœ“ INSERT RETURNING, ON CONFLICT
   âœ“ UPDATE e DELETE avanÃ§ados
   âœ“ BEGIN, COMMIT, ROLLBACK, SAVEPOINT

DIA 5: Consultas e Filtros (HOJE)
   âœ“ WHERE com operadores
   âœ“ LIKE, ILIKE, IN, BETWEEN, IS NULL
   âœ“ ORDER BY, LIMIT, OFFSET
   âœ“ DISTINCT

ğŸ“š PREPARE-SE PARA SEMANA 2:
   - PrÃ³xima semana: JOINs, agregaÃ§Ãµes, subconsultas
   - Revise relacionamentos (FK)
   - Pratique filtros e ordenaÃ§Ã£o

================================================================================
                              RESUMO DA AULA
================================================================================

âœ… OPERADORES:
   â€¢ ComparaÃ§Ã£o: =, <>, >, <, >=, <=
   â€¢ LÃ³gicos: AND, OR, NOT
   â€¢ AritmÃ©ticos: +, -, *, /, %, ^

âœ… PADRÃ•ES:
   â€¢ LIKE '%texto%' (case sensitive)
   â€¢ ILIKE '%texto%' (ignora case)
   â€¢ Curingas: % (qualquer), _ (um caractere)

âœ… INTERVALOS:
   â€¢ IN (val1, val2, ...) â†’ lista
   â€¢ BETWEEN min AND max â†’ intervalo
   â€¢ IS NULL / IS NOT NULL â†’ valores nulos

âœ… ORDENAÃ‡ÃƒO:
   â€¢ ORDER BY coluna ASC/DESC
   â€¢ NULLS FIRST / NULLS LAST

âœ… LIMITAÃ‡ÃƒO:
   â€¢ LIMIT n â†’ primeiros N
   â€¢ OFFSET n â†’ pular N
   â€¢ DISTINCT â†’ sem duplicatas

ğŸ“š TAREFA PARA CASA:
   1. ExercÃ­cios 41-50 da lista geral
   2. Revisar TODO conteÃºdo da Semana 1
   3. Preparar dÃºvidas para prÃ³xima semana

ğŸ”œ PRÃ“XIMA AULA (SEMANA 2):
   JOINs - Relacionando Tabelas
   - INNER JOIN, LEFT JOIN, RIGHT JOIN
   - FULL OUTER JOIN, CROSS JOIN
   - SELF JOIN
   - JOIN com mÃºltiplas tabelas

================================================================================
                            FIM DA AULA 05
================================================================================
